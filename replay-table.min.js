var replayTable=function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=58)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e||e instanceof String}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!0};return!!Array.isArray(e)&&e.every(function(e){return t(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{return JSON.parse(e.replace(/'/g,'"'))}catch(e){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!0};if(!e||"object"!==(void 0===e?"undefined":r(e)))return!1;var u=Object.keys(e).every(function(e){return t(e)}),i=Object.values(e).every(function(e){return n(e)});return u&&i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.log(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={alwaysTrue:function(e){return!0},hasOutcome:function(e){return function(t){return t.some(function(t){return t.results.some(function(t){return t.outcome===e})})}},hasMatches:function(e){return e.some(function(e){return e.results.some(function(e){return e.match})})}};t.default={points:{check:r.alwaysTrue,calculate:function(e){return e.change||0}},rounds:{check:r.alwaysTrue,calculate:function(e){return null===e.change?0:1}},wins:{check:r.hasOutcome("win"),calculate:function(e){return"win"===e.outcome?1:0}},losses:{check:r.hasOutcome("loss"),calculate:function(e){return"loss"===e.outcome?1:0}},draws:{check:r.hasOutcome("draw"),calculate:function(e){return"draw"===e.outcome?1:0}},goalsFor:{check:r.hasMatches,calculate:function(e){return e.match?e.match.score:0}},goalsAgainst:{check:r.hasMatches,calculate:function(e){return e.match?e.match.opponentScore:0}},goalsDifference:{check:r.hasMatches,calculate:function(e){return e.match?e.match.score-e.match.opponentScore:0}},winningPercentage:{check:r.hasOutcome("win"),calculate:function(e){return e.rounds.total?e.wins.total/e.rounds.total:0},isPost:!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(51);Object.defineProperty(t,"csv",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[].concat(r(new Set(e.reduce(function(e,t){return[].concat(r(e),r(t.results.map(function(e){return e.item})))},[]))))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(72);Object.defineProperty(t,"play",{enumerable:!0,get:function(){return r(u).default}});var i=n(73);Object.defineProperty(t,"previous",{enumerable:!0,get:function(){return r(i).default}});var a=n(71);Object.defineProperty(t,"next",{enumerable:!0,get:function(){return r(a).default}});var o=n(74);Object.defineProperty(t,"slider",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(l.default,t),r=i.enrich(e,n),u=i.sort(r,n),a=i.position(u,n);return i.addMeta(a,n)};var u=n(36),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),a=n(18),o=r(a),s=n(14),l=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(t.preset)||(0,l.default)(i),r=(0,f.default)(i,n,t);return Object.keys(t).filter(function(e){return!_.includes(e)}).map(function(e){return(0,b.default)(e)}).forEach(function(e){var u=(0,h.default)(e,r);u?n[u][e]=r[u][e].parse(t[e]):(0,g.default)('Sorry, there is no "'+e+'" parameter available. Ignoring it and moving on.')}),(0,v.default)(e,n)};var u=n(40),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),a=n(45),o=r(a),s=n(44),l=r(s),c=n(43),f=r(c),d=n(16),h=r(d),p=n(42),v=r(p),m=n(23),b=r(m),y=n(4),g=r(y),_=["preset"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=l.default.source.validate(e.source)&&e.source;if(!t)return void(0,f.default)("Please, check the data source. We couldn't get anything out from "+e.source);var n=e.extractor||(0,o.default)(t);return l.default.extractor.validate(n)?i[n](t):((0,h.default)("We couldn't determine the extractor so we'll try to use the default one, which is "+l.default.extractor.default),i[l.default.extractor.default](t))};var u=n(6),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),a=n(52),o=r(a),s=n(19),l=r(s),c=n(20),f=r(c),d=n(4),h=r(d)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,c.default)("transformer",a.default,s,t),r=d[n.transformer](e,n),u=n.filterItems.length>0?p.filterItems(r,n.filterItems):r,i=n.collapseToRounds?p.collapseToRounds(u):u;return n.insertStartRound?p.insertStartRound(i,n.insertStartRound):i};var i=n(24),a=u(i),o=n(25),s=r(o),l=n(17),c=u(l),f=n(26),d=r(f),h=n(65),p=r(h)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,c.default)("visualizer",a.default,s,t);return new d[n.visualizer](e,n)};var i=n(28),a=u(i),o=n(29),s=r(o),l=n(17),c=u(l),f=n(31),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),i=r(u),a=n(1),o=r(a),s=n(0),l=r(s);t.default={id:{default:"",parse:function(e){return e},validate:l.default},orderBy:{default:["points"],parse:function(e){return e.split(",")},validate:function(e){return(0,o.default)(e,function(e){return i.default.hasOwnProperty(e)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var r=e.filter(function(e){return n[e].total!==t[e].total})[0];return r?n[r].total-t[r].total:0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Object.keys(t).filter(function(n){return t[n].hasOwnProperty(e)});return n.length>0?n[0]:null}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,u){var a=(0,i.default)(r({},e,t[e]),r({},e,u[e]))[e],o=n.hasOwnProperty(a)?Object.assign({},t,n[a]):t;return(0,i.default)(o,u)};var u=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){Object.keys(t).filter(function(t){return!e.hasOwnProperty(t)}).forEach(function(e){return(0,i.default)('Sorry, there is no "'+e+'" parameter available. Ignoring it and moving on.')});var n=Object.keys(e).reduce(function(t,n){return Object.assign(t,r({},n,e[n].default))},{});return Object.keys(t).filter(function(t){return e.hasOwnProperty(t)}).forEach(function(r){e[r].validate(t[r])?n[r]=t[r]:void 0!==t[r]&&(0,i.default)("Sorry, we cannot accept "+t[r]+" as "+r+".                 Moving on with the default value, which is "+n[r]+".")}),n};var u=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={id:{default:"",parse:function(e){return e},validate:a.default},extractor:{default:"csv",parse:function(e){return e},validate:function(e){return u.hasOwnProperty(e)}},source:{default:void 0,parse:function(e){return e},validate:a.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.log(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var n=e.results.filter(function(e){return e.item===t})[0];return Object.assign({},n,{roundMeta:e.meta})}).filter(function(e){return!n||null!==e.change})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e>0?"+"+e:e<0?e.toString():t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(26),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),a=n(3),o=r(a),s=n(1),l=r(s),c=n(0),f=r(c),d=n(2),h=r(d);t.default={id:{default:"",parse:function(e){return e},validate:f.default},transformer:{default:"listOfMatches",parse:function(e){return e},validate:function(e){return i.hasOwnProperty(e)}},changeToOutcome:{default:{3:"win",1:"draw",0:"loss"},parse:function(e){return(0,h.default)(e)},validate:function(e){return(0,o.default)(e,function(e){return!Number.isNaN(e)},function(e){return["win","draw","loss"].includes(e)})}},filterItems:{default:[],parse:function(e){return e.split(",")},validate:function(e){return(0,l.default)(e,f.default)}},insertStartRound:{default:"0",parse:function(e){return e},validate:f.default}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(60);Object.defineProperty(t,"pointsTable",{enumerable:!0,get:function(){return r(u).default}});var i=n(59);Object.defineProperty(t,"listOfMatches",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(68);Object.defineProperty(t,"pointsTable",{enumerable:!0,get:function(){return r(u).default}});var i=n(67);Object.defineProperty(t,"listOfMatches",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),o=r(a),s=n(22),l=r(s),c=n(76),f=r(c),d=n(16),h=r(d),p=function(){function e(t,n,r){return u(this,e),this.column=t,this.result=n,this[t]?this[t](n,r):o.default.hasOwnProperty(t)?this.makeCalculation(t,n,r):t.includes(".change")?this.makeChange(t,n,r):t.includes("spark")?this.makeSpark(t,n,r):(0,h.default)(t,n.extras)?this.makeExtra(t,n,r):(this.text="",this.classes=[],this)}return i(e,[{key:"position",value:function(e,t){return this.text=(0,f.default)(e.position,t.positionWhenTied),this.classes=["position"],this}},{key:"item",value:function(e,t){return this.text=e.item,this.classes=["item","clickable"],this}},{key:"match",value:function(e,t){return this.text=e.match?e.match.score+"-"+e.match.opponentScore+" "+e.match.opponent:"",this.classes=["change"],this}},{key:"outcome",value:function(e,t){return this.text="",this.classes=["outcome"],this.backgroundColor=t.colors[e.outcome]||"transparent",this}},{key:"goalsDifference",value:function(e,t){return this.text=(0,l.default)(e.goalsDifference.total,"0"),this.classes=["calculation"],this}},{key:"winningPercentage",value:function(e,t){return this.text=e.winningPercentage.total.toFixed(3).toString().replace("0",""),this.classes=["calculation"],this}},{key:"round",value:function(e,t){return this.text=e.roundMeta.name,this.classes=["round","clickable"],this}},{key:"makeCalculation",value:function(e,t,n){return this.text=t[e].total,this.classes=["calculation"],this}},{key:"makeChange",value:function(e,t,n){var r=e.replace(".change","");return this.text=(0,l.default)(t[r].change),this.classes=["change"],this}},{key:"makeSpark",value:function(e,t,n){this.text="",this.classes=["spark"],this.roundIndex=Number.parseInt(e.split(".")[1]);var r=n.sparklinesData.get(t.item);return this.roundIndex>=r.length?(this.backgroundColor="transparent",this.result={}):(this.result=r[this.roundIndex],this.roundIndex===n.currentRound?(this.classes.push("current"),this.backgroundColor=n.darkSparkColors[r[this.roundIndex].outcome]||"transparent"):this.backgroundColor=n.sparkColors[r[this.roundIndex].outcome]||"transparent"),this}},{key:"makeExtra",value:function(e,t,n){var r=(0,h.default)(e,t.extras);return this.text=t.extras[r][e],this.classes=["extra-"+r],this}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),a=u(i),o=n(8),s=u(o),l=n(0),c=r(l),f=n(2),d=r(f),h=n(3),p=r(h),v=n(1),m=r(v);t.default={id:{default:"",parse:function(e){return e},validate:c.default},visualizer:{default:"classic",parse:function(e){return e},validate:function(e){return a.hasOwnProperty(e)}},startFromRound:{default:null,parse:function(e){return Number.parseInt(e,10)},validate:function(e){return!e||!Number.isNaN(e)}},roundsTotalNumber:{default:null,parse:function(e){return Number.parseInt(e,10)||void 0},validate:function(e){return!e||!Number.isNaN(e)}},positionWhenTied:{default:"strict",parse:function(e){return e},validate:function(e){return["strict","highest","range","average"].includes(e)}},controls:{default:["play","previous","next","slider"],parse:function(e){return e.split(",")},validate:function(e){return(0,m.default)(e,function(e){return s.hasOwnProperty(e)})}},speed:{default:1,parse:Number.parseFloat,validate:function(e){return!Number.isNaN(e)&&e>0&&e<=10}},durations:{default:{move:750,freeze:750,outcomes:200},parse:d.default,validate:function(e){return(0,p.default)(e,function(e){return["move","freeze","outcomes"].includes(e)},function(e){return!Number.isNaN(e)&&e>=0})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(69);Object.defineProperty(t,"classic",{enumerable:!0,get:function(){return r(u).default}});var i=n(70);Object.defineProperty(t,"sparklines",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){u=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(u)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(75),f=r(c),d=n(77),h=r(d),p=n(23),v=r(p),m=["roundChange","play","pause","roundPreview","endPreview","drillDown","endDrillDown"],b=function(){function e(t,n){var r,u=this;i(this,e),this.data=t,this.params=n,this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.previous=this.previous.bind(this),this.next=this.next.bind(this),this.preview=this.preview.bind(this),this.endPreview=this.endPreview.bind(this),this.drillDown=this.drillDown.bind(this),this.endDrillDown=this.endDrillDown.bind(this),this.durations=(0,f.default)(n.durations,n.speed),this.roundsTotalNumber=this.params.roundsTotalNumber||this.data.meta.lastRound,this.currentRound=null===n.startFromRound?this.data.meta.lastRound:n.startFromRound,this.previewedRound=null,this.drilldown={},this.dispatch=(r=d3).dispatch.apply(r,m),this.dispatch.on("roundChange",function(e){return u.currentRound=e.index}),this.dispatch.on("play",function(){return u.isPlaying=!0}),this.dispatch.on("pause",function(){return u.isPlaying=!1}),this.dispatch.on("roundPreview",function(e){return u.previewedRound=e.index}),this.dispatch.on("endPreview",function(e){return u.previewedRound=null}),this.dispatch.on("drillDown",function(e){u.tableContainer.classed("drilldowned",!0),u.drilldown.item=e}),this.dispatch.on("endDrillDown",function(e){u.tableContainer.classed("drilldowned",!1),u.drilldown={}}),this.selector=n.id?"#"+n.id:".replayTable",this.controlsContainer=d3.select(this.selector).append("div").attr("class","controls-container"),this.controls=this.renderControls(this.controlsContainer,this.params.controls),this.tableContainer=d3.select(this.selector).append("div").attr("class","table-container "+n.visualizer);var o=this.renderTable(this.data.results[this.currentRound].results),s=a(o,3);this.table=s[0],this.rows=s[1],this.cells=s[2]}return o(e,[{key:"renderControls",value:function(e,t){var n=this,r=e.append("div").attr("class","controls"),i=this.data.results[this.currentRound].meta,a={},o={play:[r,i,this.play,this.pause],previous:[r,i,this.previous],next:[r,i,this.next],slider:[r,this.data.meta.lastRound,this.roundsTotalNumber,i,this.preview,this.endPreview]};return t.forEach(function(e){return a[e]=new(Function.prototype.bind.apply(l[e],[null].concat(u(o[e]))))}),Object.keys(a).forEach(function(e){var t=a[e];m.forEach(function(r){var u=(0,v.default)("on-"+r);t[u]&&n.dispatch.on(r+"."+e,t[u].bind(t))})}),r}},{key:"move",value:function(e,t,n){var r=this,u=this.renderTable(this.data.results[e].results,"hidden"),i=a(u,3),o=i[0],s=i[1],l=i[2],c=(0,h.default)(this.rows),f=(0,h.default)(s);return new Promise(function(e,u){var i=0;r.cells.transition().delay(t).duration(n).style("transform",function(e,t){return"translateY("+(f[e.result.item]-c[e.result.item])+"px)"}).each(function(){return++i}).on("end",function(){--i||(r.table.remove(),r.table=o.each(function(e,t){var n=d3.select(this).attr("class");d3.select(this).attr("class",n.replace("hidden","main"))}),r.rows=s,r.cells=l,e())})})}},{key:"first",value:function(){return this.to(0)}},{key:"last",value:function(){return this.to(this.data.meta.lastRound)}},{key:"previous",value:function(){if(this.currentRound>0)return this.to(this.currentRound-1)}},{key:"next",value:function(){if(this.currentRound<this.data.meta.lastRound)return this.to(this.currentRound+1)}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.meta.lastRound;this.dispatch.call("play");var n=function n(){e.currentRound!==t&&e.isPlaying?Promise.resolve(e.next()).then(function(){return setTimeout(n,e.durations.freeze)}):e.pause()};this.currentRound===this.data.meta.lastRound?Promise.resolve(this.first()).then(function(){return setTimeout(n,e.durations.freeze)}):Promise.resolve(this.next()).then(function(){return setTimeout(n,e.durations.freeze)})}},{key:"pause",value:function(){this.dispatch.call("pause")}},{key:"endPreview",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(){return e.dispatch.call("endPreview",e,e.data.results[e.currentRound].meta),Promise.resolve()};return null===this.previewedRound||this.previewedRound===this.currentRound?n():t?Promise.resolve(this.to(this.previewedRound)).then(n):Promise.resolve(this.preview(this.currentRound)).then(n)}}]),e}();t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(78);Object.defineProperty(t,"classic",{enumerable:!0,get:function(){return r(u).default}});var i=n(79);Object.defineProperty(t,"sparklines",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Array.from(document.getElementsByClassName("replayTable")).map(function(e){var t=(0,i.default)(e.id,e.dataset);return Promise.resolve((0,o.default)(t.extract)).then(function(e){var n=(0,l.default)(e,t.transform),r=(0,f.default)(n,t.calculate);return(0,h.default)(r,t.visualize)}).catch(function(e){return(0,v.default)(e)})})};var u=n(10),i=r(u),a=n(11),o=r(a),s=n(12),l=r(s),c=n(9),f=r(c),d=n(13),h=r(d),p=n(20),v=r(p)},function(e,t){},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.map(function(e,t){return{meta:{name:e.name,index:t,isLast:!1,items:e.results.filter(function(e){return null!==e.change}).length,hasOnlyOutcomes:e.results.every(function(e){return e.outcome||null===e.change}),biggestChange:Math.max.apply(Math,r(e.results.map(function(e){return Math.abs(e.change||0)}))),sumOfChanges:e.results.reduce(function(e,t){return e+(t.change||0)},0)},results:e.results}}),u=n.filter(function(e){return e.results.some(function(e){return null!==e.change})}).reduce(function(e,t){return Math.max(t.meta.index,e)},0);return n[u].meta.isLast=!0,{meta:{lastRound:u},results:n}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Object.keys(a.default).filter(function(t){return a.default[t].check(e)}),r=(0,s.default)(e),i=n.reduce(function(e,t){return Object.assign(e,u({},t,0))},{}),o=r.reduce(function(e,t){return Object.assign(e,u({},t,Object.assign({},i)))},{});return e.map(function(e){var t=e.results.map(function(e){var t=Object.assign({},e),r=o[e.item];return n.filter(function(e){return!a.default[e].isPost}).forEach(function(e){var n=a.default[e].calculate(t);t[e]={change:n,total:r[e]+n},r[e]+=n}),n.filter(function(e){return a.default[e].isPost}).forEach(function(e){var n=a.default[e].calculate(t);t[e]={change:null,total:n}}),t});return{name:e.name,results:t}})};var i=n(5),a=r(i),o=n(7),s=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(35);Object.defineProperty(t,"enrich",{enumerable:!0,get:function(){return r(u).default}});var i=n(38);Object.defineProperty(t,"sort",{enumerable:!0,get:function(){return r(i).default}});var a=n(37);Object.defineProperty(t,"position",{enumerable:!0,get:function(){return r(a).default}});var o=n(34);Object.defineProperty(t,"addMeta",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,u.default)(t.orderBy);return e.map(function(e){var t=e.results.map(function(t,r){var u=Object.assign({},t),i=e.results.filter(function(e){return n(e,t)<0}),a=e.results.filter(function(e){return e.item!==t.item&&0===n(e,t)});return u.position={strict:r+1,highest:i.length+1,lowest:i.length+a.length+1},u});return{name:e.name,results:t}})};var r=n(15),u=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.slice(0,1),r=(0,o.default)(t.orderBy);return e.slice(1).forEach(function(e,t){n.push({name:e.name,results:(0,i.default)(e.results,n[t].results,r)})}),n};var u=n(39),i=r(u),a=n(15),o=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return e.map(function(e){return{obj:e,idx:t.map(function(e){return e.item}).indexOf(e.item)}}).sort(function(e,t){return n(e.obj,t.obj)?n(e.obj,t.obj):e.idx-t.idx}).map(function(e){return e.obj})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(19);Object.defineProperty(t,"extract",{enumerable:!0,get:function(){return r(u).default}});var i=n(24);Object.defineProperty(t,"transform",{enumerable:!0,get:function(){return r(i).default}});var a=n(14);Object.defineProperty(t,"calculate",{enumerable:!0,get:function(){return r(a).default}});var o=n(28);Object.defineProperty(t,"visualize",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.visualize=t.transform=void 0;var u=n(25),i=r(u),a=n(29),o=r(a);t.transform={processorField:"transformer",configs:i},t.visualize={processorField:"visualizer",configs:o}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).reduce(function(n,u){var i=Object.assign({id:e},t[u]);return Object.assign(n,r({},u,i))},{})}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return Object.keys(e).map(function(r){if(!i.hasOwnProperty(r))return{name:r,config:e[r]};var u=i[r].processorField,a=e[r][u].validate(n[u])?n[u]:t[r][u]||e[r][u].default;return{name:r,config:i[r].configs[a]?Object.assign({},e[r],i[r].configs[a]):e[r]}}).reduce(function(e,t){return Object.assign(e,r({},t.name,t.config))},{})};var u=n(41),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce(function(e,t){return Object.assign(e,r({},t,{}))},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e?u.hasOwnProperty(e)?u[e]:((0,a.default)('No "'+e+'" preset for now, sorry about that. Moving on with the default settings.'),null):null};var r=n(48),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={extract:{},transform:{transformer:"pointsTable",changeToOutcome:{1:"win",0:"loss"}},calculate:{},visualize:{columns:["position","item","points","outcome"],labels:["#","Команда","Взятых"],positionWhenTied:"range"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={extract:{},transform:{transformer:"pointsTable",changeToOutcome:{25:"win"},insertStartRound:"Start →"},calculate:{orderBy:["points","wins"]},visualize:{columns:["position","item","points","points.change"],labels:["#","Driver","Points"]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(50);Object.defineProperty(t,"winLoss",{enumerable:!0,get:function(){return r(u).default}});var i=n(46);Object.defineProperty(t,"chgk",{enumerable:!0,get:function(){return r(i).default}});var a=n(47);Object.defineProperty(t,"f1",{enumerable:!0,get:function(){return r(a).default}});var o=n(49);Object.defineProperty(t,"matches",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={extract:{},transform:{transformer:"listOfMatches",collapseToRounds:!0},calculate:{},visualize:{columns:["position","item","points","outcome","match"],labels:["#","Team","Points"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={extract:{},transform:{transformer:"listOfMatches",changeToOutcome:{1:"win",0:"loss"}},calculate:{orderBy:["winningPercentage","wins"]},visualize:{visualizer:"classic",columns:["position","item","rounds","wins","losses","winningPercentage","outcome","match"],labels:["#","Team","G","W","L","Win %"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){d3.text(e,function(e){if(!e)return void n("Sorry, we can't reach your csv file");var r=d3.csvParseRows(e);t(r)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)(e);return u.hasOwnProperty(t)?t:null};var r=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(55),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce(function(t,n){var u=Number.parseInt(n,10),i=isNaN(u)?n:u,a=e[n];return Object.assign(t,r({},a,i))},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.slice((Math.max(0,e.lastIndexOf("."))||1/0)+1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e[0]).map(function(t){return e.map(function(e){return e[t]})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.magic=t.visualize=t.calculate=t.transform=t.extract=t.configure=void 0;var u=n(10);Object.defineProperty(t,"configure",{enumerable:!0,get:function(){return r(u).default}});var i=n(11);Object.defineProperty(t,"extract",{enumerable:!0,get:function(){return r(i).default}});var a=n(12);Object.defineProperty(t,"transform",{enumerable:!0,get:function(){return r(a).default}});var o=n(9);Object.defineProperty(t,"calculate",{enumerable:!0,get:function(){return r(o).default}});var s=n(13);Object.defineProperty(t,"visualize",{enumerable:!0,get:function(){return r(s).default}});var l=n(32);Object.defineProperty(t,"magic",{enumerable:!0,get:function(){return r(l).default}}),n(33)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={locationFirst:{default:"home",parse:function(e){return e},validate:function(e){return["home","away"].includes(e)}},collapseToRounds:{default:!0,parse:function(e){return"true"===e},validate:function(e){return"boolean"==typeof e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={extraColumnsNumber:{default:0,parse:function(e){return Number.parseInt(e,10)},validate:function(e){return!Number.isNaN(e)}}}},function(e,t,n){"use strict";function r(e){switch(e){case"home":return"away";case"away":return"home";case"neutral":return"neutral";default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{team:e.match.opponent,match:{location:r(e.match.location),score:e.match.opponentScore,opponent:e.team,opponentScore:e.match.score}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.match.score>e.match.opponentScore?"win":e.match.score<e.match.opponentScore?"loss":e.match.score===e.match.opponentScore?"draw":void 0}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e),n=t.reduce(function(e,t){return Object.assign(e,r({},t,0))},{}),u=[];return e.forEach(function(e){e.results.filter(function(e){return null!==e.change}).forEach(function(e){var t=++n[e.item];u.length<t&&u.push({name:t.toString(),results:[]}),u[t-1].results.push(e)})}),u};var u=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.map(function(e){return{name:e.name,results:e.results.filter(function(e){return t.includes(e.item)})}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(63);Object.defineProperty(t,"collapseToRounds",{enumerable:!0,get:function(){return r(u).default}});var i=n(64);Object.defineProperty(t,"filterItems",{enumerable:!0,get:function(){return r(i).default}});var a=n(66);Object.defineProperty(t,"insertStartRound",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return[{name:t,results:e[0].results.map(function(e){var t=Object.assign({},e);return["change","match","outcome"].filter(function(t){return e.hasOwnProperty(t)}).forEach(function(e){return t[e]=null}),t.extras&&Object.keys(t.extras).filter(function(e){return"item"!==e}).forEach(function(e){return t.extras[e]=null}),t})}].concat(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return Array.isArray(e)?e:Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.filter(function(e){return e&&e.length>=5}),r=i(n),a=(r[0],r.slice(1)),s=[].concat(u(new Set(a.map(function(e){return e[0]})))),c=[].concat(u(new Set([].concat(u(a.map(function(e){return e[1]})),u(a.map(function(e){return e[3]})))))),d=(0,o.default)(t.changeToOutcome);return s.map(function(e){var n=[];return a.filter(function(t){return t[0]===e}).forEach(function(e){var r={team:e[1],match:{location:t.locationFirst,score:Number.parseInt(e[2],10),opponent:e[3],opponentScore:Number.parseInt(e[4],10)}};[r,(0,l.default)(r)].forEach(function(e){var t=(0,f.default)(e);n.push({item:e.team,change:d[t],outcome:t,match:e.match,extras:{}})})}),c.filter(function(e){return!n.map(function(e){return e.item}).includes(e)}).forEach(function(e){n.push({item:e,change:null,match:null,extras:{}})}),{name:e,results:n}})};var a=n(53),o=r(a),s=n(61),l=r(s),c=n(62),f=r(c)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(t.extraColumnsNumber||0)+1,u=e[0].slice(1,n),a=e[0].slice(n),o=(0,i.default)(e.slice(1).filter(function(e){return e[0]})),s=o[0],l=o.slice(1,n).map(function(e){return new Map(s.map(function(t,n){return[t,e[n]]}))});return o.slice(n).map(function(e,n){var i=[];return e.forEach(function(e,n){var a=s[n],o=e?Number.parseInt(e,10)||0:null;i.push({item:a,change:o,outcome:t.changeToOutcome[o]||null,extras:{item:l.reduce(function(e,t,n){return Object.assign(e,r({},u[n],t.get(a)))},{})}})}),{name:a[n],results:i}})};var u=n(57),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),a=n(0),o=r(a),s=n(2),l=r(s),c=n(3),f=r(c);t.default={columns:{default:["position","item","points"],parse:function(e){return e.split(",")},validate:function(e){return(0,i.default)(e,o.default)}},labels:{default:["#","Team","Points"],parse:function(e){return e.split(",")},validate:function(e){return(0,i.default)(e,o.default)}},colors:{default:{win:"#ACE680",draw:"#B3B3B3",loss:"#E68080"},parse:l.default,validate:function(e){return(0,f.default)(e,function(e){return["win","draw","loss"].includes(e)},function(e){return(0,o.default)(e)})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=r(u),a=n(0),o=r(a),s=n(8),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(2),f=r(c),d=n(3),h=r(d);t.default={controls:{default:["play"],parse:function(e){return e.split(",")},validate:function(e){return(0,i.default)(e,function(e){return l.hasOwnProperty(e)})}},colors:{default:{win:"#ACE680",draw:"#B3B3B3",loss:"#E68080"},parse:f.default,validate:function(e){return(0,h.default)(e,function(e){return["win","draw","loss"].includes(e)},function(e){return(0,o.default)(e)})}},sparkColors:{default:{win:"#D7E7C1",draw:"#F0F0F0",loss:"#EFCEBA"},parse:f.default,validate:function(e){return(0,h.default)(e,function(e){return["win","draw","loss"].includes(e)},function(e){return(0,o.default)(e)})}},pointsLabel:{default:"points",parse:function(e){return e},validate:o.default},allLabel:{default:"All",parse:function(e){return e},validate:o.default}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,u){r(this,e),this.button=t.append("div").attr("class","next").classed("disabled",n.isLast).on("click",u),this.onRoundChange=this.onRoundChange.bind(this)}return u(e,[{key:"onRoundChange",value:function(e){this.button.classed("disabled",e.isLast)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,u,i){var a=this;r(this,e),this.isLast=n.isLast,this.button=t.append("div").on("click",function(){a.isPlaying?i():u()}),this.updateClass(),this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onRoundChange=this.onRoundChange.bind(this)}return u(e,[{key:"onPlay",value:function(){this.isPlaying=!0,this.updateClass()}},{key:"onPause",value:function(){this.isPlaying=!1,this.updateClass()}},{key:"onRoundChange",value:function(e){this.isLast=e.isLast,this.updateClass()}},{key:"updateClass",value:function(){var e=this.isPlaying?"pause":this.isLast?"replay":"play";this.button.classed("play","play"===e).classed("pause","pause"===e).classed("replay","replay"===e)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,u){r(this,e),this.button=t.append("div").attr("class","previous").classed("disabled",0===n.index).on("click",u),this.onRoundChange=this.onRoundChange.bind(this)}return u(e,[{key:"onRoundChange",value:function(e){this.button.classed("disabled",0===e.index)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,u,i,a,o){var s=this;r(this,e),this.container=t.append("div").attr("class","slider"),this.roundToPercent=d3.scaleLinear().domain([0,u]).range([0,100]);var l=this.container.node().getBoundingClientRect();this.scale=d3.scaleLinear().range([0,l.right-l.left]).domain([0,u]).clamp(!0),this.available=this.container.append("span").attr("class","slider-available").style("width",this.roundToPercent(n)+"%");var c=this.roundToPercent(i.index)+"%";this.toggle=this.container.append("span").attr("class","slider-toggle").style("left",c).text(i.name).style("margin-left",this.adaptMargin).call(d3.drag().on("drag",function(){var e=Math.min(Math.round(s.scale.invert(d3.event.x)),n);a(e)}).on("end",function(){return o(!0)})),this.progress=this.container.append("span").attr("class","slider-progress").style("width",c),this.onRoundPreview=this.onRoundPreview.bind(this),this.onRoundChange=this.onRoundChange.bind(this)}return u(e,[{key:"adaptMargin",value:function(){return"-"+d3.select(this).node().getBoundingClientRect().width/2+"px"}},{key:"onRoundPreview",value:function(e){var t=this.roundToPercent(e.index)+"%";this.toggle.style("left",t).text(e.name).style("margin-left",this.adaptMargin),this.progress.style("width",t)}},{key:"onRoundChange",value:function(e){var t=this,n=this.roundToPercent(e.index)+"%";this.toggle.transition().duration(500).styleTween("left",function(){return d3.interpolateString(t.toggle.node().style.left,n)}).on("end",function(){t.toggle.text(e.name).style("margin-left",t.adaptMargin)}),this.progress.transition().duration(500).styleTween("width",function(){return d3.interpolateString(t.progress.node().style.width,n)})}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(e).reduce(function(n,u){return Object.assign(n,r({},u,e[u]/t))},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"strict":return e.strict.toString();case"highest":return e.highest.toString();case"range":return e.highest!==e.lowest?e.highest+"–"+e.lowest:e.highest.toString();case"average":return((e.highest+e.lowest)/2).toString();default:return e.strict.toString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return e.nodes().forEach(function(e){var n=e.__data__.item,r=e.getBoundingClientRect().top;(!t[n]||t[n]<r)&&(t[n]=r)}),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){u=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(u)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(30),c=r(l),f=n(27),d=r(f),h=n(54),p=r(h),v=n(21),m=r(v),b=function(e){function t(){return u(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"renderTable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.columns,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.params.labels,i=this.tableContainer.append("table").attr("class",t);i.append("thead").append("tr").selectAll("th").data(r).enter().append("th").text(function(e,t){return u[t]?u[t]:["outcome","match","round"].includes(e)||e.includes(".change")?"":(0,p.default)(e)});var a=i.append("tbody"),o=a.selectAll("tr").data(e,function(e){return e.item||e.roundMeta.index}).enter().append("tr");return[i,o,o.selectAll("td").data(function(e){return r.map(function(t){return new d.default(t,e,n.params)})}).enter().append("td").attr("class",function(e){return e.classes.join(" ")}).style("background-color",function(e){return e.backgroundColor||"transparent"}).text(function(e){return e.text}).on("click",function(e){switch(e.column){case"item":return n.drillDown(e.result.item);case"round":return n.endDrillDown(e.result.roundMeta.index);default:return null}})]}},{key:"to",value:function(e){var t=this;if(e<0||e>this.data.meta.lastRound)return Promise.reject("Sorry we can't go to round #"+e);this.dispatch.call("roundChange",this,this.data.results[e].meta);var n=new Map(this.data.results[e].results.map(function(e){return[e.item,e]})),r=this.params.columns.includes("outcome");return r&&this.table.selectAll("td.outcome").transition().duration(this.durations.outcomes).style("background-color",function(e){return t.params.colors[n.get(e.result.item).outcome]||"transparent"}),this.table.selectAll("td.change").text(function(e){return new d.default(e.column,n.get(e.result.item),t.params).text}),this.move(e,r?this.durations.outcomes:0,this.durations.move)}},{key:"preview",value:function(e){var t=this;return this.dispatch.call("roundPreview",this,this.data.results[e].meta),this.rows=this.rows.data(this.data.results[e].results,function(e){return e.item}),this.cells=this.rows.selectAll("td").data(function(e){return t.params.columns.map(function(n){return new d.default(n,e,t.params)})}).attr("class",function(e){return e.classes.join(" ")}).style("background-color",function(e){return e.backgroundColor||"transparent"}).text(function(e){return e.text}),Promise.resolve()}},{key:"drillDown",value:function(e){var t=this;this.dispatch.call("drillDown",this,e),this.controls.classed("hidden",!0),this.drilldown.controls=this.controlsContainer.append("div").attr("class","drilldown-contorls"),this.drilldown.controls.append("div").attr("class","back").text("<-").on("click",this.endDrillDown.bind(this)),this.drilldown.controls.append("div").attr("class","item").text(e);var n=["round"],r=[""];this.params.columns.forEach(function(e,u){var i=new d.default(e,t.data.results[1].results[0],t.params).classes;"item"===e||i.includes("extra-item")||(n.push(e),r.push(t.params.labels[u]||""))});var u=(0,m.default)(this.data.results,e,!0);this.table.classed("hidden",!0);var i=this.renderTable(u,"drilldown",n,r),a=o(i,3);return this.drilldown.table=a[0],this.drilldown.rows=a[1],this.drilldown.cells=a[2],Promise.resolve()}},{key:"endDrillDown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=function(){return e.dispatch.call("endDrillDown",e,t),Promise.resolve()};if(this.drilldown.controls.remove(),this.controls.classed("hidden",!1),this.drilldown.table.remove(),this.table.classed("hidden",!1),null!==t)return Promise.resolve(this.to(t)).then(n);n()}}]),t}(c.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,u=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){u=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(u)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(30),f=r(c),d=n(27),h=r(d),p=n(22),v=r(p),m=n(7),b=r(m),y=n(21),g=r(y),_=n(56),w=r(_),O=function(e){function t(e,n){i(this,t);var r=(0,b.default)(e.results),u=Object.assign({},n,{sparklinesData:new Map(r.map(function(t){return[t,(0,g.default)(e.results,t)]})),darkSparkColors:{win:"#AAD579",draw:"#CCCCCC",loss:"#E89B77"}}),o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u));return o.durations.scale=d3.scaleLinear().domain([1,e.meta.lastRound]).range([o.durations.move,1.5*o.durations.move]),o}return o(t,e),l(t,[{key:"makeTable",value:function(e,t,n){var r=this,u=this.tableContainer.append("table").attr("class",t),i=u.append("tbody"),a=i.selectAll("tr").data(e,function(e){return e.item}).enter().append("tr").attr("class",t.includes("left")?"left":"right"),o=Object.assign({currentRound:this.currentRound},this.params),s=a.selectAll("td").data(function(e){return n.map(function(t){return new P(t,e,o)})}).enter().append("td").attr("class",function(e){return e.classes.join(" ")}).each(function(e){var t=this;["color","backgroundColor"].filter(function(t){return e.hasOwnProperty(t)}).forEach(function(n){return d3.select(t).style((0,w.default)(n),e[n])})}).text(function(e){return e.text}).on("click",function(e){switch(e.column){case"item":return r.drilldown.item!==e.result.item?r.drillDown(e.result.item):r.endDrillDown();default:return null}});return t.includes("left")&&this.enrichSparks(u),[u,a,s]}},{key:"enrichSparks",value:function(e){var t=this;this.sparks=e.selectAll("td.spark").filter(function(e){return e.roundIndex<=t.data.meta.lastRound}),this.sparks.on("mouseover",function(e){return t.preview(e.roundIndex)}).on("mouseout",function(e){return t.endPreview(!1)}).on("click",function(e){return t.endPreview(!0)});var n=d3.scaleLinear().domain([1,this.data.results[0].results.length]).range([0,100]);this.sparks.append("span").attr("class","spark-position").style("top",function(e){return n(e.result.position.strict)+"%"}),this.sparks.append("span").attr("class","spark-score muted").style("color",function(e){return t.params.colors[e.result.outcome]||"black"}).text(function(e){return e.result.match?e.result.match.score+":"+e.result.match.opponentScore:""})}},{key:"makeSlider",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",n="top"===t?this.left.table.select("tbody").insert("tr","tr"):this.left.table.select("tbody").append("tr");return n.attr("class","sparklines-slider "+t).selectAll("td").data(this.left.columns.slice(0,3)).enter().append("td").attr("colspan",function(t,n){return 2===n?e.roundsTotalNumber:null}).attr("class",function(e,t){return 2===t?"slider-cell":null}),this.slider.left=this.slider.scale(this.currentRound)+"px",n.select(".slider-cell").append("span").attr("class","slider-toggle").style("left",this.slider.left).text(this.data.results[this.currentRound].meta.name).call(d3.drag().on("drag",function(){var t=Math.round(e.slider.scale.invert(d3.event.x));e.moveRightTable(t),e.preview(t)}).on("end",function(){return e.endPreview(!0)}))}},{key:"moveSlider",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.slider.left,this.slider.left=this.slider.scale(e)+"px",[this.slider.top,this.slider.bottom].map(function(r){r.transition().duration(n).style("left",t.slider.left).text(t.data.results[e].meta.name)})}},{key:"renderTable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";this.left={},this.right={},this.slider={};var n=Array.from({length:this.roundsTotalNumber},function(e,t){return"spark."+(t+1)});this.left.columns=["position","item"].concat(u(n)),this.right.columns=["score","opponent","points.change","equal","points","pointsLabel"],this.right.drilldownColumns=["score","opponent","wins","draws","losses","labeledPoints"];var r=this.makeTable(e,t+" left",this.left.columns),i=s(r,3);this.left.table=i[0],this.left.rows=i[1],this.left.cells=i[2];var a=this.makeTable(e,t+" right",this.right.columns),o=s(a,3);this.right.table=o[0],this.right.rows=o[1],this.right.cells=o[2],this.moveRightTable(this.currentRound);var l=this.sparks.nodes().map(function(e){return e.offsetLeft}),c=(this.sparks.node().offsetWidth,Math.min.apply(Math,u(l))),f=Math.max.apply(Math,u(l));this.slider.scale=d3.scaleLinear().domain([1,this.data.meta.lastRound]).range([0,f-c]).clamp(!0),this.slider.top=this.makeSlider("top"),this.slider.bottom=this.makeSlider("bottom");var d=d3.selectAll(this.selector+" table."+t),h=d3.selectAll(d3.merge([this.left.rows.nodes(),this.right.rows.nodes()]));return[d,h,h.selectAll("td")]}},{key:"moveRightTable",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.right.left,u=this.sparks.filter(function(t){return t.roundIndex===e}).node();this.right.left=u.offsetLeft+u.offsetWidth,n?this.right.table.transition().duration(n).styleTween("left",function(){return d3.interpolateString(r+"px",t.right.left+"px")}):this.right.table.style("left",this.right.left+"px")}},{key:"updateRightTable",value:function(e){var t=this;e&&this.right.rows.data(this.data.results[e].results,function(e){return e.item});var n=this.drilldown.item?this.right.drilldownColumns:this.right.columns;this.right.cells=this.right.cells.data(function(e){return n.map(function(n){return new P(n,e,t.params)})}).attr("class",function(e){return e.classes.join(" ")}).style("color",function(e){return e.color}).text(function(e){return e.text})}},{key:"to",value:function(e){if(e<1||e>this.data.meta.lastRound)return Promise.reject("Sorry we can't go to round #"+e);if(e===this.currentRound)return Promise.resolve();this.drilldown.item&&this.endDrillDown();var t=e-this.currentRound;this.dispatch.call("roundChange",this,this.data.results[e].meta),this.updateRightTable(e);var n=this.durations.scale(Math.abs(t));return this.moveRightTable(e,n),this.moveSlider(e,n),this.move(e,0,n)}},{key:"first",value:function(){return this.to(1)}},{key:"preview",value:function(e){var t=this;return e<1||e>this.data.meta.lastRound?Promise.reject("Sorry we can't preview round #"+e):this.previewedRound===e?Promise.resolve():(this.dispatch.call("roundPreview",this,this.data.results[e].meta),this.updateRightTable(e),this.moveSlider(e),this.sparks.filter(".current").classed("current",!1).style("background-color",function(e){return t.params.sparkColors[e.result.outcome]||"transparent"}),this.sparks.filter(function(t){return t.roundIndex===e}).classed("current",!0).style("background-color",function(e){return t.params.darkSparkColors[e.result.outcome]||"transparent"}),Promise.resolve())}},{key:"drillDown",value:function(e){return this.dispatch.call("drillDown",this,e),this.drilldown.controls||(this.drilldown.controls=this.controls.append("div").attr("class","drilldown-control").on("click",this.endDrillDown).text(this.params.allLabel)),this.sparks.classed("muted",function(t){return!t.result.match||t.result.item!==e&&t.result.match.opponent!==e}),this.sparks.selectAll(".spark-score").classed("muted",function(t){return!t.result.match||t.result.item===e||t.result.match.opponent!==e}),this.updateRightTable(),this.right.rows.classed("muted",function(t){return t.item!==e}),Promise.resolve()}},{key:"endDrillDown",value:function(){return this.drilldown.controls.remove(),this.drilldown.controls=null,this.sparks.classed("muted",!1),this.sparks.selectAll(".spark-score").classed("muted",!0),this.right.rows.classed("muted",!1),this.dispatch.call("endDrillDown",this,null),this.updateRightTable(),Promise.resolve()}}]),t}(f.default);t.default=O;var P=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"score",value:function(e,t){return this.text=e.match?e.match.score+":"+e.match.opponentScore:"",this.classes=["score","change"],this.color=t.colors[e.outcome],this}},{key:"opponent",value:function(e,t){return this.text=e.match?e.match.opponent:"",this.classes=["opponent","change"],this}},{key:"equal",value:function(e,t){return this.text=1===e.position.strict?"=":"",this.classes=["label","change"],this}},{key:"pointsLabel",value:function(e,t){return this.text=1===e.position.strict?t.pointsLabel:"",this.classes=["label","change"],this}},{key:"wins",value:function(e,t){return this.text=e.wins.total+" w.",this.classes=["change"],this.color=t.colors.win,this}},{key:"draws",value:function(e,t){return this.text=e.draws.total+" d.",this.classes=["change"],this.color=t.colors.draw,this}},{key:"losses",value:function(e,t){return this.text=e.losses.total+" l.",this.classes=["change"],this.color=t.colors.loss,this}},{key:"labeledPoints",value:function(e,t){return this.text=e.points.total+" points",this.classes=["change"],this}},{key:"makeChange",value:function(e,t,n){var r=e.replace(".change","");return this.text=(0,v.default)(t[r].change,"0"),this.classes=["change"],this.color=n.colors[t.outcome],this}}]),t}(h.default)}]);